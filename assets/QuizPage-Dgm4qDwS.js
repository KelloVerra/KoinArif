import{b as n,a as e,u as i,r as a,i as t,k as s,l as r,m as c,j as o,n as u,o as d,p as l,q as h,t as m}from"./index-BiGDsJx_.js";import z from"./NotFound-BJekmEXP.js";const q={content:"_content_s99n4_1","quiz-header":"_quiz-header_s99n4_11","quiz-stat-container":"_quiz-stat-container_s99n4_25","quiz-reward-display":"_quiz-reward-display_s99n4_61","quiz-question-container":"_quiz-question-container_s99n4_87","quiz-confirm-btn":"_quiz-confirm-btn_s99n4_131","matching-quiz-option-container":"_matching-quiz-option-container_s99n4_189","matching-quiz-option":"_matching-quiz-option_s99n4_189","matching-quiz-option-correct":"_matching-quiz-option-correct_s99n4_245","anim-quiz-correct-option-0":"_anim-quiz-correct-option-0_s99n4_1","matching-quiz-option-incorrect":"_matching-quiz-option-incorrect_s99n4_259","anim-quiz-incorrect-option-0":"_anim-quiz-incorrect-option-0_s99n4_1","quiz-fin-header":"_quiz-fin-header_s99n4_281","quiz-fin-content":"_quiz-fin-content_s99n4_301","quiz-fin-stat-container":"_quiz-fin-stat-container_s99n4_309","quiz-fin-stat-coin":"_quiz-fin-stat-coin_s99n4_325","anim-quiz-fin-stat":"_anim-quiz-fin-stat_s99n4_1","quiz-fin-stat-accuracy":"_quiz-fin-stat-accuracy_s99n4_365","quiz-fin-btn":"_quiz-fin-btn_s99n4_405"};function _(){const u=n(),d=e(),l=i(n=>n.user.value);i(n=>n.material.value);const h=i(n=>n.quiz.value),m=h.generatedQuizes[h.currentGeneratedQuizIndex],_=!l.hasStarted||!m,f=a.useRef(!1);a.useEffect(n=>{f.current||(h.answeredQuizes[h.currentGeneratedQuizIndex]&&j(),f.current=!0)},[]);const x=a.useCallback(n=>d(t({...n}))),j=a.useCallback(n=>{window.scrollTo(0,0),d(s()),h.currentGeneratedQuizIndex>=h.generatedQuizes.length-1&&(d(r("empty"===l.history[0].type?l.history[1].data.material.id:l.history[0].data.material.id)),d(c({})))},[h.currentGeneratedQuizIndex]),k=a.useCallback(n=>{u("/")},[]),b=a.useCallback(n=>{console.log("bookmarked")},[]);return o.jsx(o.Fragment,{children:_?o.jsx(z,{}):o.jsx("div",{className:q.content,children:h.quizCompletionRecapData.finished?o.jsx(p,{onConfirmEnd:k}):o.jsx(g,{state:h,quiz:m,onNextQuestion:j,onQuestionBookmarked:b,addAnswerState:x})})})}function g({state:n,quiz:e,onNextQuestion:i,onQuestionBookmarked:t,addAnswerState:s}){const[r,c]=a.useState(!1),u=n.generatedQuizes[n.currentGeneratedQuizIndex].reward;return a.useEffect(n=>{c(!1)},[e]),o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:q["quiz-header"],children:[o.jsx("img",{src:l,width:"150px"}),o.jsxs("div",{style:{width:"100%"},children:[o.jsxs("div",{className:q["quiz-stat-container"],children:[o.jsxs("h1",{children:["Quiz ",n.currentGeneratedQuizIndex+1]}),o.jsxs("h2",{children:["/",n.generatedQuizes.length]}),o.jsxs("div",{className:q["quiz-reward-display"],children:[o.jsx("img",{src:l,alt:"coinIcon",width:"20"}),o.jsxs("p",{children:["+",u," koin"]})]})]}),o.jsxs("div",{className:q["quiz-question-container"],children:[o.jsx("p",{children:e.question}),o.jsx("img",{src:"/KoinArif/Bookmark.svg",alt:"bookmarkQuestion",width:"20",onClick:t})]})]})]}),(()=>{switch(e.display_format){case 0:return o.jsx(f,{data:e,confirmable:{state:r,set:c},addAnswerState:s,reward:u});case 1:return o.jsx(MatchingQuestion,{data:e,confirmable:{state:r,set:c},addAnswerState:s,reward:u})}})(),o.jsx("button",{className:q["quiz-confirm-btn"],disabled:!r,onClick:n=>i(),children:"Lanjut"})]})}function f({data:n,confirmable:e,addAnswerState:i,reward:t}){const[s,r]=a.useState(-1),[c,u]=a.useState("matching-quiz-option-incorrect");return a.useEffect(a=>{if(-1===s)return;const r=n.options[s],c=m(r.parent_format).is_options_correct(r);u(c?"matching-quiz-option-correct":"matching-quiz-option-incorrect"),i({quiz_data:n,accuracy:c?1:0,gotReward:c?t:0}),e.set(!0)},[s]),a.useEffect(n=>{e.state||r(-1)},[e.state]),o.jsx("div",{className:q["matching-quiz-option-container"],deps:[e,n,s,c],style:{gridTemplateColumns:`repeat(${n.options.length}, 1fr)`},children:Array.from({length:n.options.length}).map((i,a)=>o.jsxs("button",{className:`${q["matching-quiz-option"]} ${q[s===a?c:""]}`,onClick:n=>r(a),disabled:e.state,children:[" ",n.options[a].desc," "]},a))})}function p({onConfirmEnd:n}){const t=i(n=>n.quiz.value),s=i(n=>n.user.value),r=e(),c=["Waw! Kamu Keren banget!","Kerja bagus! Ini langkah kecil ke hasil yang besar.","Tuntas deh! siap untuk yang berikutnya?","Nilai tak segalanya, usahamu-lah yang lebih berharga.","Kerja bagus! Ini langkah kecil ke hasil yang besar.","Bangga dong, kamu sudah satu langkah lebih pintar!","Kesalahan itu guru terbaik, terus belajar, terus tumbuh.","Kamu nggak harus sempurna kok! cukup terus berkembang."],m=t.quizCompletionRecapData.totalReward,z=t.quizCompletionRecapData.accuracy,_=a.useRef(!1);return a.useEffect(n=>{_.current||"quiz"==s.history[0].type&&(r(u()),r(d(m)),_.current=!0)},[]),o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:q["quiz-fin-header"],children:[o.jsx("img",{src:l,alt:"mascot",width:"150px"}),o.jsx("h1",{children:c[h(c.length)]})]}),o.jsxs("div",{className:q["quiz-fin-content"],children:[o.jsxs("div",{className:q["quiz-fin-stat-container"],children:[o.jsxs("div",{className:q["quiz-fin-stat-coin"],children:[o.jsx("img",{src:l,alt:"coinIcon",width:"40px"}),o.jsxs("h2",{children:["+",m," Koin"]})]}),o.jsxs("div",{className:q["quiz-fin-stat-accuracy"],children:[o.jsx("img",{src:"/KoinArif/CheckBadge.svg",alt:"accuracyIcon",width:"40px"}),o.jsxs("h2",{children:[Math.round(100*z),"%"]})]})]}),o.jsx("button",{onClick:n,className:q["quiz-fin-btn"],children:"Selesai"})]})]})}export{_ as default};
