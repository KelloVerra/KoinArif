import{j as s,d as r,P as g,M as k,c as v,a as z,u as h,r as o,g as N,h as q,z as y,i as p,k as C,l as Q,n as $,o as M,b as S,p as i}from"./index-10ZKQEX8.js";import w from"./NotFound-Bk-BJ3ey.js";import{M as I,A as L}from"./PrimaryArrowGo-_ObTx0yF.js";function P({visible:e}){const t=n=>e.set(!1);return s.jsx(s.Fragment,{children:s.jsx("div",{className:`${r.container} ${e.val?r.visible:""}`,children:s.jsxs("div",{className:r.content,children:[s.jsx("a",{className:`${r.btn} ${r.quit}`,onClick:t,children:s.jsx("img",{src:g,alt:"[quit]",width:"25"})}),s.jsx("img",{className:r.mascot,src:k,alt:"mascot thinking",width:"25"}),s.jsx("h2",{children:"Maaf, Belum cukup!"}),s.jsxs("p",{children:[" Koinmu tidak cukup untuk memulai kuis, ",s.jsx("br",{}),"Kamu bisa tuntas-in miniquiz, ",s.jsx("br",{}),"Mempelajari materi lainnya, ",s.jsx("br",{}),"atau kelarin kuis materi lain untuk ngumpulin koin."]}),s.jsx("a",{className:`${r.btn} ${r["btn-primary"]}`,onClick:t,children:"Siap!"})]})})})}function T(){const e=v(),t=z(),n=h(l=>l.user.value),u=h(l=>l.material.value),m=!n.hasStarted||n.history.length===0,[d,c]=o.useState(!1),a=o.useRef((l=>{if(m)return{id:-1,error:1,component:null};const x=n.history[0].data.material_id,j=N(x);return j.error&&console.warn(`unable to obtain material index of ${x}`),j})()),b=o.useCallback(l=>{if(n.budget<a.current.requiredQuizCoins){c(!0);return}t(q({type:"quiz",data:{material:{id:a.current.id,terms:a.current.terms}}})),y.success(`-${a.current.requiredQuizCoins} Koin`,{icon:s.jsx("img",{src:p,alt:"[coinIcon]",width:"5",style:{height:"1.618rem",width:"auto"}})}),t(C(a.current.requiredQuizCoins)),t(Q(u.materialLevel)),t($()),t(M({level:u.materialLevel,material:a.current})),e("/quiz")},[a.current,n.budget]),f=o.useCallback(l=>{e("/")},[]);return s.jsxs(s.Fragment,{children:[s.jsx(P,{visible:{val:d,set:c}}),a.current.error?s.jsx(w,{}):s.jsx(K,{receivedMaterialData:a.current,goHome:f,startQuiz:b})]})}function K({receivedMaterialData:e,goHome:t,startQuiz:n}){const u=h(c=>c.user.value),m=S(),d=u.budget>=e.requiredQuizCoins;return s.jsxs("div",{className:i.content,children:[s.jsxs("div",{className:i["header-container"],children:[s.jsxs("div",{className:i.textart,children:[s.jsxs("p",{className:i.lvl,children:["Materi Level ",e.id+1,"   •   ",e.estimateDuration]}),e.displayTitle]}),m?null:s.jsx(I,{scale:1.45,className:i.mascot})]}),s.jsx("div",{className:i["material-container"],children:e.component()}),s.jsxs("button",{onClick:n,className:`${i["start-quiz-btn"]} ${d?i["start-quiz-btn-enabled"]:""}`,children:[s.jsxs("div",{className:i["quiz-requirement-display"],children:[s.jsx("img",{src:p,alt:"coinLogo",width:"20"}),s.jsx("p",{children:e.requiredQuizCoins})]}),"Mulai Kuis Latihan ",e.title,s.jsx("img",{src:L,alt:"",width:"5"})]}),s.jsx("button",{className:i["back-btn"],onClick:t,children:"Kembali ke halaman utama"})]})}export{T as default};
