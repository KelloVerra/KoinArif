const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MascotCelebrate-DBJzesEc.js","assets/index-BCSKgTpG.js","assets/index-BlObPZlB.css","assets/main.module-C9wNpe0e.js","assets/main-B47H01E1.css","assets/MascotAdmire-BGrRBiBS.js","assets/MascotNerd-DKMuvZun.js","assets/MascotIdle-DOFb1R9V.js","assets/MascotSurprised-B0QXPfpn.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,f as g,L as v,_ as h,c as b,a as y,u as f,n as I,o as w,p as k,q as E,b as N,z as x,t as j,v as q,w as Q,x as S,y as C}from"./index-BCSKgTpG.js";import R from"./NotFound-BDdBPZbV.js";const M="_content_1pfsj_1",L="_leftovr_1pfsj_97",A="_mascot_1pfsj_331",s={content:M,"gradient-heading":"_gradient-heading_1pfsj_17","quiz-mascot-container":"_quiz-mascot-container_1pfsj_29","quiz-mascot":"_quiz-mascot_1pfsj_29","quiz-detail-container":"_quiz-detail-container_1pfsj_51","quiz-header":"_quiz-header_1pfsj_57","quiz-stat-container":"_quiz-stat-container_1pfsj_71",leftovr:L,"quiz-reward-display":"_quiz-reward-display_1pfsj_109","quiz-question-container":"_quiz-question-container_1pfsj_135","quiz-confirm-btn":"_quiz-confirm-btn_1pfsj_175","multchoice-quiz-option-container":"_multchoice-quiz-option-container_1pfsj_235","multchoice-quiz-option":"_multchoice-quiz-option_1pfsj_235","multchoice-quiz-option-correct":"_multchoice-quiz-option-correct_1pfsj_293","anim-quiz-correct-option-0":"_anim-quiz-correct-option-0_1pfsj_1","multchoice-quiz-option-incorrect":"_multchoice-quiz-option-incorrect_1pfsj_305","anim-quiz-incorrect-option-0":"_anim-quiz-incorrect-option-0_1pfsj_1","quiz-fin-header":"_quiz-fin-header_1pfsj_325",mascot:A,"quiz-fin-content":"_quiz-fin-content_1pfsj_351","quiz-fin-stat-container":"_quiz-fin-stat-container_1pfsj_359","quiz-fin-stat-coin":"_quiz-fin-stat-coin_1pfsj_375","quiz-fin-stat-lvl":"_quiz-fin-stat-lvl_1pfsj_375","quiz-fin-stat-accuracy":"_quiz-fin-stat-accuracy_1pfsj_375","anim-quiz-fin-stat":"_anim-quiz-fin-stat_1pfsj_1","quiz-fin-btn":"_quiz-fin-btn_1pfsj_435"},F="/KoinArif/CheckBadge.svg",D=a.lazy(t=>h(()=>import("./MascotCelebrate-DBJzesEc.js"),__vite__mapDeps([0,1,2,3,4]))),T=a.lazy(t=>h(()=>import("./MascotAdmire-BGrRBiBS.js"),__vite__mapDeps([5,1,2,3,4]))),P=a.lazy(t=>h(()=>import("./MascotNerd-DKMuvZun.js"),__vite__mapDeps([6,1,2,3,4])));function K({scale:t,className:i}){const r=a.useRef([e.jsx(T,{scale:1*t,className:i}),e.jsx(P,{scale:t*.9,className:i}),e.jsx(D,{scale:1.125*t,className:i})]),c=a.useRef(g(r.current.length));return e.jsx(a.Suspense,{fallback:e.jsx(v,{}),children:r.current[c.current]})}const O=a.lazy(t=>h(()=>import("./MascotCelebrate-DBJzesEc.js"),__vite__mapDeps([0,1,2,3,4]))),V=a.lazy(t=>h(()=>import("./MascotAdmire-BGrRBiBS.js"),__vite__mapDeps([5,1,2,3,4]))),$=a.lazy(t=>h(()=>import("./MascotIdle-DOFb1R9V.js"),__vite__mapDeps([7,1,2,3,4]))),G=a.lazy(t=>h(()=>import("./MascotSurprised-B0QXPfpn.js"),__vite__mapDeps([8,1,2,3,4])));function B({scale:t,state:i}){const r=a.useRef(0),c=u=>[_=>e.jsx($,{scale:t,className:s["quiz-mascot"]}),_=>[e.jsx(O,{scale:t*1.25,className:s["quiz-mascot"]}),e.jsx(V,{scale:t*1.2,className:s["quiz-mascot"]})][r.current],_=>e.jsx(G,{scale:t*1,className:s["quiz-mascot"]})],[o,l]=a.useState(c()[i]());return a.useEffect(u=>{r.current=g(2),l(c()[i]())},[i]),e.jsx(a.Suspense,{fallback:e.jsx(v,{}),children:o})}function Y(){const t=b(),i=y(),r=f(n=>n.user.value);f(n=>n.material.value);const c=f(n=>n.quiz.value),o=c.generatedQuizes[c.currentGeneratedQuizIndex],l=!r.hasStarted||!o,u=a.useRef(!1);a.useEffect(n=>{u.current||(c.answeredQuizes[c.currentGeneratedQuizIndex]&&d(),u.current=!0)},[]);const _=a.useCallback(n=>i(I({...n}))),d=a.useCallback(n=>{window.scrollTo(0,0),i(w()),c.currentGeneratedQuizIndex>=c.generatedQuizes.length-1&&(i(k(r.history[0].type==="empty"?r.history[1].data.material.id:r.history[0].data.material.id)),i(E({})))},[c.currentGeneratedQuizIndex]),m=a.useCallback(n=>{t("/")},[]);return e.jsx(e.Fragment,{children:l?e.jsx(R,{}):e.jsx("div",{className:s.content,children:c.quizCompletionRecapData.finished?e.jsx(W,{onConfirmEnd:m}):e.jsx(U,{state:c,quiz:o,onNextQuestion:d,addAnswerState:_})})})}function U({state:t,quiz:i,onNextQuestion:r,addAnswerState:c}){const[o,l]=a.useState(!1),u=t.generatedQuizes[t.currentGeneratedQuizIndex].reward,[_,d]=a.useState(0);a.useEffect(p=>{l(!1),d(0)},[i]);const m=p=>{l(!0),d(p?1:2)},n=p=>{switch(i.display_format){case 0:return e.jsx(H,{data:i,confirmable:{state:o,trigger:m},addAnswerState:c,reward:u})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s["quiz-header"],children:[e.jsx("div",{className:s["quiz-mascot-container"],children:e.jsx(B,{scale:1.25,state:_})}),e.jsxs("div",{className:s["quiz-detail-container"],children:[e.jsxs("div",{className:s["quiz-stat-container"],children:[e.jsxs("h1",{children:["Quiz ",t.currentGeneratedQuizIndex+1]}),e.jsxs("h1",{className:s.leftovr,children:["/",t.generatedQuizes.length]}),e.jsxs("div",{className:s["quiz-reward-display"],children:[e.jsx("img",{src:j,alt:"coinIcon",width:"20"}),e.jsxs("p",{children:["+",u," koin"]})]})]}),e.jsx("div",{className:s["quiz-question-container"],children:e.jsx("p",{children:i.question})})]})]}),n(),e.jsx("button",{className:s["quiz-confirm-btn"],disabled:!o,onClick:p=>r(),children:"Lanjut"})]})}function H({data:t,confirmable:i,addAnswerState:r,reward:c}){const[o,l]=a.useState(-1),[u,_]=a.useState("multchoice-quiz-option-incorrect"),d=N();return a.useEffect(m=>{if(o===-1)return;const n=t.options[o],z=C(n.parent_format).is_options_correct(n);_(z?"multchoice-quiz-option-correct":"multchoice-quiz-option-incorrect"),r({quiz_data:t,accuracy:z?1:0,gotReward:z?c:0}),i.trigger(z)},[o]),a.useEffect(m=>{i.state||l(-1)},[i.state]),e.jsx("div",{className:s["multchoice-quiz-option-container"],deps:[i.state,t,o,u],style:{gridTemplateColumns:`repeat(${d?1:t.options.length}, 1fr)`},children:Array.from({length:t.options.length}).map((m,n)=>e.jsxs("button",{className:`${s["multchoice-quiz-option"]} ${s[o===n?u:""]}`,onClick:p=>l(n),disabled:i.state,children:[" ",t.options[n].desc," "]},n))})}function W({onConfirmEnd:t}){const i=f(n=>n.quiz.value),r=f(n=>n.user.value),c=y(),o=N(),l=[e.jsxs(e.Fragment,{children:["Waw! Kamu ",e.jsx("span",{className:s["gradient-heading"],children:"Keren banget!"})]}),e.jsxs(e.Fragment,{children:["Kerja bagus! Ini langkah kecil ke ",e.jsx("span",{className:s["gradient-heading"],children:"hasil yang besar."})]}),e.jsxs(e.Fragment,{children:["Tuntas deh! siap untuk yang ",e.jsx("span",{className:s["gradient-heading"],children:"berikutnya?"})]}),e.jsxs(e.Fragment,{children:["Nilai tak segalanya, ",e.jsx("span",{className:s["gradient-heading"],children:"usahamu-lah yang lebih berharga."})]}),e.jsxs(e.Fragment,{children:["Bangga dong, kamu sudah ",e.jsx("span",{className:s["gradient-heading"],children:"satu langkah lebih pintar!"})]}),e.jsxs(e.Fragment,{children:["Kesalahan itu ",e.jsx("span",{className:s["gradient-heading"],children:"guru terbaik"}),", terus belajar, terus tumbuh."]}),e.jsxs(e.Fragment,{children:["Kamu nggak harus sempurna kok! ",e.jsx("span",{className:s["gradient-heading"],children:"cukup terus berkembang."})]})],u=i.quizCompletionRecapData.totalReward,_=i.quizCompletionRecapData.accuracy,d=r.history[1].type==="quiz"?r.history[1].data.material.id===i.prevMaterialLvl:!1,m=a.useRef(!1);return a.useEffect(n=>{m.current||r.history[0].type=="quiz"&&(x.success(`+${u} Koin`,{icon:e.jsx("img",{src:j,alt:"[coinIcon]",width:"5",style:{height:"1.618rem",width:"auto"}})}),r.history[0].data.material.id===i.prevMaterialLvl&&x.success("Level Up",{icon:e.jsx("img",{src:q,alt:"[levelIcon]",width:"5",style:{height:"1.618rem",width:"auto"}})}),c(Q()),c(S(u)),m.current=!0)},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s["quiz-fin-header"],children:[e.jsx(K,{scale:o?1.75:1.25,className:s.mascot}),e.jsx("h2",{children:l[g(l.length)]})]}),e.jsxs("div",{className:s["quiz-fin-content"],children:[e.jsxs("div",{className:s["quiz-fin-stat-container"],style:{gridTemplateColumns:`repeat(${d?3:2}, 1fr)`},children:[e.jsxs("div",{className:s["quiz-fin-stat-coin"],children:[e.jsx("img",{src:j,alt:"[coinIcon]",width:"40px"}),e.jsxs("p",{children:["+",u," Koin"]})]}),e.jsxs("div",{className:s["quiz-fin-stat-accuracy"],children:[e.jsx("img",{src:F,alt:"[accuracyIcon]",width:"40px"}),e.jsxs("p",{children:[Math.round(_*100),"%"]})]}),d?e.jsxs("div",{className:s["quiz-fin-stat-lvl"],children:[e.jsx("img",{src:q,alt:"[levelIcon]",width:"40px"}),e.jsx("p",{children:"Level Up!"})]}):null]}),e.jsx("button",{onClick:t,className:s["quiz-fin-btn"],children:"Selesai"})]})]})}export{Y as default};
