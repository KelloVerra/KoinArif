import{b as e,a as i,u as a,r as n,k as t,l as r,m as s,n as o,j as c,o as u,p as d,q as l,c as h,t as m}from"./index-DZu7VPTy.js";import z from"./NotFound-BHcQGZ7K.js";const q={content:"_content_1r1o3_1","quiz-header":"_quiz-header_1r1o3_11","quiz-stat-container":"_quiz-stat-container_1r1o3_25","quiz-reward-display":"_quiz-reward-display_1r1o3_61","quiz-question-container":"_quiz-question-container_1r1o3_87","quiz-confirm-btn":"_quiz-confirm-btn_1r1o3_131","matching-quiz-option-container":"_matching-quiz-option-container_1r1o3_191","matching-quiz-option":"_matching-quiz-option_1r1o3_191","matching-quiz-option-correct":"_matching-quiz-option-correct_1r1o3_247","anim-quiz-correct-option-0":"_anim-quiz-correct-option-0_1r1o3_1","matching-quiz-option-incorrect":"_matching-quiz-option-incorrect_1r1o3_261","anim-quiz-incorrect-option-0":"_anim-quiz-incorrect-option-0_1r1o3_1","quiz-fin-header":"_quiz-fin-header_1r1o3_283","quiz-fin-content":"_quiz-fin-content_1r1o3_303","quiz-fin-stat-container":"_quiz-fin-stat-container_1r1o3_311","quiz-fin-stat-coin":"_quiz-fin-stat-coin_1r1o3_327","anim-quiz-fin-stat":"_anim-quiz-fin-stat_1r1o3_1","quiz-fin-stat-accuracy":"_quiz-fin-stat-accuracy_1r1o3_367","quiz-fin-btn":"_quiz-fin-btn_1r1o3_407"};function _(){const u=e(),d=i(),l=a(e=>e.user.value);a(e=>e.material.value);const h=a(e=>e.quiz.value),m=h.generatedQuizes[h.currentGeneratedQuizIndex],_=!l.hasStarted||!m,f=n.useRef(!1);n.useEffect(e=>{f.current||(h.answeredQuizes[h.currentGeneratedQuizIndex]&&j(),f.current=!0)},[]);const x=n.useCallback(e=>d(t({...e}))),j=n.useCallback(e=>{window.scrollTo(0,0),d(r()),h.currentGeneratedQuizIndex>=h.generatedQuizes.length-1&&(d(s("empty"===l.history[0].type?l.history[1].data.material.id:l.history[0].data.material.id)),d(o({})))},[h.currentGeneratedQuizIndex]),k=n.useCallback(e=>{u("/")},[]),b=n.useCallback(e=>{console.log("bookmarked")},[]);return c.jsx(c.Fragment,{children:_?c.jsx(z,{}):c.jsx("div",{className:q.content,children:h.quizCompletionRecapData.finished?c.jsx(p,{onConfirmEnd:k}):c.jsx(g,{state:h,quiz:m,onNextQuestion:j,onQuestionBookmarked:b,addAnswerState:x})})})}function g({state:e,quiz:i,onNextQuestion:a,onQuestionBookmarked:t,addAnswerState:r}){const[s,o]=n.useState(!1),u=e.generatedQuizes[e.currentGeneratedQuizIndex].reward;return n.useEffect(e=>{o(!1)},[i]),c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:q["quiz-header"],children:[c.jsx("img",{src:l,width:"150px"}),c.jsxs("div",{style:{width:"100%"},children:[c.jsxs("div",{className:q["quiz-stat-container"],children:[c.jsxs("h1",{children:["Quiz ",e.currentGeneratedQuizIndex+1]}),c.jsxs("h2",{children:["/",e.generatedQuizes.length]}),c.jsxs("div",{className:q["quiz-reward-display"],children:[c.jsx("img",{src:l,alt:"coinIcon",width:"20"}),c.jsxs("p",{children:["+",u," koin"]})]})]}),c.jsxs("div",{className:q["quiz-question-container"],children:[c.jsx("p",{children:i.question}),c.jsx("img",{src:"/KoinArif/Bookmark.svg",alt:"bookmarkQuestion",width:"20",onClick:t})]})]})]}),(()=>{switch(i.display_format){case 0:return c.jsx(f,{data:i,confirmable:{state:s,set:o},addAnswerState:r,reward:u});case 1:return c.jsx(MatchingQuestion,{data:i,confirmable:{state:s,set:o},addAnswerState:r,reward:u})}})(),c.jsx("button",{className:q["quiz-confirm-btn"],disabled:!s,onClick:e=>a(),children:"Lanjut"})]})}function f({data:e,confirmable:i,addAnswerState:a,reward:t}){const[r,s]=n.useState(-1),[o,u]=n.useState("matching-quiz-option-incorrect");return n.useEffect(n=>{if(-1===r)return;const s=e.options[r],o=m(s.parent_format).is_options_correct(s);u(o?"matching-quiz-option-correct":"matching-quiz-option-incorrect"),a({quiz_data:e,accuracy:o?1:0,gotReward:o?t:0}),i.set(!0)},[r]),n.useEffect(e=>{i.state||s(-1)},[i.state]),c.jsx("div",{className:q["matching-quiz-option-container"],deps:[i,e,r,o],style:{gridTemplateColumns:`repeat(${e.options.length}, 1fr)`},children:Array.from({length:e.options.length}).map((a,n)=>c.jsxs("button",{className:`${q["matching-quiz-option"]} ${q[r===n?o:""]}`,onClick:e=>s(n),disabled:i.state,children:[" ",e.options[n].desc," "]},n))})}function p({onConfirmEnd:e}){const t=a(e=>e.quiz.value),r=a(e=>e.user.value),s=i(),o=["Waw! Kamu Keren banget!","Kerja bagus! Ini langkah kecil ke hasil yang besar.","Tuntas deh! siap untuk yang berikutnya?","Nilai tak segalanya, usahamu-lah yang lebih berharga.","Kerja bagus! Ini langkah kecil ke hasil yang besar.","Bangga dong, kamu sudah satu langkah lebih pintar!","Kesalahan itu guru terbaik, terus belajar, terus tumbuh.","Kamu nggak harus sempurna kok! cukup terus berkembang."],m=t.quizCompletionRecapData.totalReward,z=t.quizCompletionRecapData.accuracy,_=n.useRef(!1);return n.useEffect(e=>{_.current||"quiz"==r.history[0].type&&(s(u()),s(d(m)),_.current=!0)},[]),c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:q["quiz-fin-header"],children:[c.jsx("img",{src:l,alt:"mascot",width:"150px"}),c.jsx("h1",{children:o[h(o.length)]})]}),c.jsxs("div",{className:q["quiz-fin-content"],children:[c.jsxs("div",{className:q["quiz-fin-stat-container"],children:[c.jsxs("div",{className:q["quiz-fin-stat-coin"],children:[c.jsx("img",{src:l,alt:"coinIcon",width:"40px"}),c.jsxs("h2",{children:["+",m," Koin"]})]}),c.jsxs("div",{className:q["quiz-fin-stat-accuracy"],children:[c.jsx("img",{src:"/KoinArif/CheckBadge.svg",alt:"accuracyIcon",width:"40px"}),c.jsxs("h2",{children:[Math.round(100*z),"%"]})]})]}),c.jsx("button",{onClick:e,className:q["quiz-fin-btn"],children:"Selesai"})]})]})}export{_ as default};
